function checklogin(dest){
  var searchIcon = jQuery("#topbar-header-search").find(".toggle-search");
  setSearchIconRedirect();
  var pagename = location.pathname.substring(location.pathname.lastIndexOf("/") + 1);
  //if we're on the login page or failed login page, we don't want to include it as a destination
  if(pagename == "sign-in"||pagename == "failed"){
	  dest = "";
  }
  jQuery.ajax({
       url: "/?auth/check_signedin_wp",
       type: "POST",//type of posting the data
       data: "",
       success: function (data) {
         if(data.length > 0){
                 //alert("logged in called it with "+dest);
                 sessionStorage.setItem('HSDL_id', data);
                 searchIcon.prepend('<a id="signinBtn" title="sign out" href="/?auth/signout&dest='+dest+'" style="margin-right:20px; color:#a7de90;"><i class="fa fa-sign-out fa-lg"></i></a>');
                 jQuery( "#signinBtn" ).click(function( event ) {
                	event.stopPropagation();
                 });
	     }else{
                 //alert("not logged in called it with "+dest);     	
                 sessionStorage.removeItem('HSDL_id');
                 searchIcon.prepend('<a id="signinBtn" title="sign in" href="/c/sign-in?dest='+dest+'" style="margin-right:20px; color:white;"><i class="fa fa-sign-in fa-lg"></i></a>');
                 jQuery( "#signinBtn" ).click(function( event ) {
                	event.stopPropagation();
                 });
	     }
       }
  });
}
/*clicking on the search icon will re-direct to the search page instead of displaying the search box*/
function setSearchIconRedirect(){
	jQuery("div.toggle-search").find(".fa-search" ).on("click", function(e){
		e.stopPropagation();
		window.location = "//"+window.location.hostname+"/?search";
	});
}